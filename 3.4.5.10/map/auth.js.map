{"version":3,"sources":["webpack:///webpack/bootstrap f4b3f8edada7bfe26fec","webpack:///../lib/jsl/utils.js","webpack:///./auth.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA,qEAAO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,6D;AACA,6CAA6C,UAAU;AACvD,mC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,mBAAmB,6BAA6B;AAChD,OAAO,oC;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA,iCAAiC,yBAAyB;AAC1D;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,wBAAwB,WAAW,EAAE,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;AACA,S;AACA,gDAAgD,SAAS;AACzD;AACA,uC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,kCAAkC,wEAAwE;AAC1G;AACA;AACA;AACA,OAAO,mCAAmC;AAC1C;AACA;AACA;AACA,gCAAgC,sDAAsD;AACtF;AACA,OAAO,sCAAsC;AAC7C;AACA,gCAAgC,oDAAoD;AACpF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,kCAAkC;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,mBAAmB;AACxC;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gBAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,oGAAC;;;;;;;;ACjSF,qEAAO;AACP;AACA,cAAc,mBAAO,CAAC,CAAgB;;AAEtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB,KAAK;AACL,iEAAiE;AACjE;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB;AACpB,CAAC;AAAA,oGAAC","file":"auth.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 88);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f4b3f8edada7bfe26fec","define(function(require, exports, module) {\r\n  'use strict';\r\n\r\n  function safeParse(jso) {\r\n    try {\r\n      return JSON.parse(jso);\r\n    } catch (e) {\r\n    }\r\n  }\r\n  \r\n  function errmsg(e) {\r\n    if (typeof(e) === 'undefined') {\r\n      return 'undefined';\r\n    }\r\n    return JSON.stringify(e, Object.getOwnPropertyNames(e));\r\n  }\r\n  \r\n  function stringifyJSON(o) {\r\n    return (typeof(o) === 'undefined' || o instanceof Error) ? errmsg(o) : JSON.stringify(o);\r\n  }\r\n  \r\n  function getProperties(o, properties) {\r\n    var keyvalues = [];\r\n    properties = properties || Object.getOwnPropertyNames(o); \r\n    for (var i = 0, ilen = properties.length; i < ilen; i++) {\r\n      var property = properties[i]; \r\n      keyvalues.push(property + ': ' + stringifyProperties(o[property]));\r\n    }\r\n    return keyvalues;\r\n  }\r\n  \r\n  function getValues(a) {\r\n    var values = [];\r\n    for (var i = 0, len = a.length; i < len; i++) {\r\n      var elem = a[i];\r\n      values.push(stringifyProperties(elem));\r\n    }\r\n    return values;\r\n  }\r\n\r\n  function stringifyProperties(o, properties) {\r\n    var result;\r\n    var otype = typeof o;\r\n    if (otype === 'number') {\r\n      result = o.toString();\r\n    } else if (otype === 'string') {\r\n      result = '\\'' + o.toString() + '\\'';\r\n    } else if (otype === 'undefined') {\r\n      result = 'undefined';\r\n    } else if (o === null) {\r\n      result = 'null';\r\n    } else if (o) {\r\n      if (o.constructor === Object) {\r\n        var keyvalues = getProperties(o, properties);\r\n        result = '{' + keyvalues.join(', ') + '}';\r\n      } else if (o.constructor === Array) { \r\n        var values = getValues(o);\r\n        result = '[' + values.join(', ') + ']';\r\n      } else {\r\n        result = o.toString();\r\n      }\r\n    } else {\r\n      result = '???'; // should never get here...\r\n    }\r\n    return result;\r\n  }\r\n    \r\n  function getArraysDiff(a, b) {\r\n    return a.filter(function(i) {return b.indexOf(i) < 0;});\r\n  }\r\n  \r\n  function getArraysSymmDiff(a, b) {\r\n    var diffAdded = getArraysDiff(a, b);\r\n    var diffRemoved = getArraysDiff(b, a);\r\n    var diff = diffAdded.concat(diffRemoved);\r\n    return diff;\r\n  }\r\n  \r\n  function getArraysUnion(a, b) \r\n  {\r\n    var r = a.slice(0);\r\n    b.forEach(function(i) { if (r.indexOf(i) < 0) { r.push(i); } });\r\n    return r;\r\n  }\r\n  \r\n  function compareObjects(a, b, properties) {\r\n    var propertyChanges = [];\r\n    var propertyPath = [];\r\n    var compare = function (a, b, properties) {\r\n      var aconstructor = a.constructor;\r\n      if (aconstructor === Object ||\r\n         (aconstructor !== Number && \r\n          aconstructor !== String &&\r\n          aconstructor !== Date && \r\n          aconstructor !== RegExp &&\r\n          aconstructor !== Boolean &&\r\n          aconstructor !== Array &&\r\n          aconstructor !== Function)) {\r\n        if (!properties) {\r\n          properties = getArraysUnion(Object.getOwnPropertyNames(a), Object.getOwnPropertyNames(b)); \r\n        }  \r\n        for (var i = 0, len = properties.length; i < len; i++) {\r\n        // for (var property in a) {\r\n          var property = properties[i]; \r\n          propertyPath.push(propertyPath.length === 0 ? property : '.' + property);\r\n          if (a[property] && b[property]) {\r\n            if (a[property].constructor !== Function) {\r\n              compare(a[property], b[property]);\r\n            }\r\n          } else if (a[property] !== b[property]) {\r\n            propertyChanges.push({ 'property': propertyPath.join(''), 'a': a[property], 'b': b[property] });\r\n          }\r\n          propertyPath.pop();\r\n        }\r\n      } else if (aconstructor === Array) { // use special comparison for Arrays\r\n        var da = getArraysDiff(a, b);\r\n        var db = getArraysDiff(b, a);\r\n        if (da.length > 0 || db.length > 0) {\r\n          propertyChanges.push({ 'property': propertyPath.join(''), 'a': da, 'b': db });\r\n        }\r\n      } else if (aconstructor !== Function) { // skip comparison for Functions\r\n        if (a !== b) {\r\n          propertyChanges.push({ 'property': propertyPath.join(''), 'a': a, 'b': b });\r\n        }\r\n      }\r\n    };\r\n    compare(a, b, properties);\r\n    return propertyChanges;\r\n  }\r\n\r\n  function extractUrlArg(context, item) {\r\n    item = item.split('=');\r\n    var key = item.shift();\r\n    if (key) {\r\n      context[key] = decodeURIComponent(item.join('=')).replace(/\\+/g, ' ');\r\n    }\r\n    return context;\r\n  }\r\n  function extractUrlInfo(s, bag) {\r\n    return s.substr(1).split('&').reduce(extractUrlArg, bag);\r\n  }\r\n  \r\n  function updateDescription(odesc, ndesc, id) {\r\n    var re = /(^|\\s)=====+[^=]+\\[Zang\\:[^\\]]*\\]\\s*=====+(\\s|$)/im;\r\n\r\n    if (ndesc) {\r\n      var pre = '==================================================';\r\n      var pos = '[Zang:' + id + ']\\n' + pre;\r\n      ndesc = pre + '\\n\\n' + ndesc + '\\n\\n' + pos + '\\n';\r\n    }\r\n\r\n    var done = false;\r\n    var desc = odesc.replace(re, function () {\r\n      if (!done || !ndesc) {\r\n        done = true;\r\n        return ndesc;\r\n      }\r\n    });\r\n\r\n    if (!done && ndesc) {\r\n      desc = odesc + '\\n' + ndesc;\r\n    }\r\n    return desc;\r\n  }\r\n\r\n  function getObjectInfo(obj, fields) {\r\n    if (typeof(obj) === 'object') {\r\n      return '{ ' + getLogInfo(obj, fields) + ' }';\r\n    }\r\n    return getLogInfo(obj, fields);\r\n  }\r\n\r\n  function getLogInfo(obj, fields) {\r\n    if (typeof(obj) === 'string') {\r\n      return '\"' + obj + '\"';\r\n    }\r\n    if (!obj) {\r\n      return (String(obj));\r\n    }\r\n    if (typeof(obj) === 'function') {\r\n      // return (String(obj));\r\n      return 'function() { ... }';\r\n    }\r\n    if (typeof(obj) === 'object') {\r\n      if (Object.getOwnPropertyNames(obj).length === 0) {\r\n        return '';\r\n      }\r\n      fields = fields || Object.getOwnPropertyNames(obj);\r\n      var res = '';\r\n      for (var i = 0; i < fields.length; i++) {\r\n        var names = fields[i].split('.');\r\n        var val = obj;\r\n        for (var j = 0; j < names.length; j++) {\r\n          val = val[names[j]];\r\n          if (!val) {\r\n            break;\r\n          }\r\n        }\r\n        if (val instanceof Array) {\r\n          var arr = '[ ';\r\n          for (var k = 0; k < val.length; k++) {\r\n            if (k !== 0) {\r\n              arr += ', ';\r\n            }\r\n            arr += getObjectInfo(val[k]);\r\n          }\r\n          arr += ' ]';\r\n          val = arr;\r\n        } else {\r\n          val = getObjectInfo(val);\r\n        }\r\n        if (i !== 0) {\r\n          res += ', ';\r\n        }\r\n        res += fields[i] + ': ' + val;\r\n      }\r\n      return res;\r\n    }\r\n    return '' + obj;\r\n  }\r\n\r\n  function prepareLogInfo(point, obj, fields, exclude) {\r\n    // return;\r\n    if (typeof(obj) === 'undefined') {\r\n      return point;\r\n    }\r\n    if (fields && exclude) {\r\n      var ofields = Object.getOwnPropertyNames(obj);\r\n      fields.forEach(function (field) {\r\n        var index = ofields.indexOf(field);\r\n        if (index !== -1) {\r\n          ofields.splice(index, 1);\r\n        }\r\n      });\r\n      fields = ofields;\r\n    }\r\n    var info = point + ': ' + getObjectInfo(obj, fields);\r\n    return info;\r\n  }\r\n\r\n  function showLogInfo(point, obj, fields, exclude) {\r\n    var info = prepareLogInfo(point, obj, fields, exclude);\r\n    if (typeof(info) === 'undefined') {\r\n      return;\r\n    }\r\n    console.info(info);\r\n  }\r\n\r\n  function mergeConfigs(config1, config2) {\r\n    if (!config1 && !config2) {\r\n      return {};\r\n    }\r\n    if (!config1) {\r\n      return config2;\r\n    }\r\n    if (!config2) {\r\n      return config1;\r\n    }\r\n    var config = {};\r\n    var fields = Object.getOwnPropertyNames(config1);\r\n    for (var i = 0; i < fields.length; i++) {\r\n      config[fields[i]] = config1[fields[i]];\r\n    }\r\n    fields = Object.getOwnPropertyNames(config2);\r\n    for (i = 0; i < fields.length; i++) {\r\n      config[fields[i]] = config2[fields[i]];\r\n    }\r\n    return config;\r\n  }\r\n\r\n  var utils = {\r\n    safeParse: safeParse,\r\n    errmsg: errmsg,\r\n    stringifyJSON: stringifyJSON,\r\n    getArraysDiff: getArraysDiff,\r\n    getArraysSymmDiff: getArraysSymmDiff,\r\n    getArraysUnion: getArraysUnion,\r\n    compareObjects : compareObjects,\r\n    stringifyProperties: stringifyProperties,\r\n    extractUrlInfo: extractUrlInfo,\r\n    updateDescription: updateDescription,\r\n    getObjectInfo: getObjectInfo,\r\n    getLogInfo: getLogInfo,\r\n    prepareLogInfo: prepareLogInfo,\r\n    showLogInfo: showLogInfo,\r\n    mergeConfigs: mergeConfigs\r\n  };\r\n\r\n  module.exports = utils;\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../lib/jsl/utils.js\n// module id = 1\n// module chunks = 0 1 4","define(function(require, exports, module) {\r\n  'use strict';\r\n  var Utils = require('/lib/jsl/utils');\r\n\r\n  var errorkey = 'auth-error';\r\n\r\n  function getStorage() {\r\n    var storage = window.localStorage;\r\n    if (window.opener && window.opener.localStorage) {\r\n      storage = window.opener.localStorage;\r\n    }\r\n    return storage;\r\n  }\r\n  function getAppPath() {\r\n    var storage = getStorage();\r\n    var appPath = storage.getItem('myAppPath');\r\n    storage.removeItem('myAppPath');\r\n\r\n    return appPath;\r\n  }\r\n  function applyAuthInfo() {\r\n    var storage = getStorage();\r\n    try {\r\n      var state = Utils.extractUrlInfo(location.hash, {})['state'];\r\n      var hash = location.hash;\r\n\r\n      if (state && hash) {\r\n        storage.setItem(state, hash);\r\n        storage.setItem('myAppHash', hash);\r\n      } else if (!state) {\r\n        storage.setItem(errorkey, 'state undefined');\r\n      } else if (!hash) {\r\n        storage.setItem(errorkey, 'auth info undefined');\r\n      }\r\n    } catch (e) {\r\n      storage.setItem(errorkey, e.message);\r\n    }\r\n  }\r\n\r\n  function completeAuth() {\r\n    var appPath = getAppPath();\r\n    if (!appPath) {\r\n      window.close(); // so we close the window with a delay (if validator didn't close it)\r\n    } else {\r\n      var app1Path = appPath.replace(/(.*)\\.html$/i, '$11.html'); // replace app.html with app1.html\r\n      window.open(app1Path, '_self');\r\n    }\r\n  }\r\n\r\n  function processAuth() {\r\n    applyAuthInfo();\r\n    setTimeout(completeAuth, 1000);\r\n  }\r\n\r\n  setTimeout(processAuth, 10);\r\n\r\n  module.exports = { };\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./auth.js\n// module id = 88\n// module chunks = 4"],"sourceRoot":""}